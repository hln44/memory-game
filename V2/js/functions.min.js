let place=[];const returnedCard=[],placeCard=[];let caseNumber=document.querySelectorAll(".case"),divCount=document.querySelector(".count"),count=0,imageSrc=0,value=0,click=0;function mix(){const e=new Set;for(;e.size<12;){let t=Math.floor(12*Math.random())+1;e.add(t)}place=[...e]}function initialize(){count=0,divCount.innerHTML=`${count}`,returnedCard.splice(0,2),placeCard.splice(0,2);for(let e of caseNumber)e.classList.remove("flipped"),e.classList.remove("unrotate"),e.classList.remove("rotate");for(let e=1;e<13;e++)caseNumber.forEach((e=>e.innerHTML='<img src="medias/image0.png">'))}function play(){caseNumber.forEach((e=>e.addEventListener("click",flip)))}function flip(){if(click++,this.classList.remove("unrotate"),click<=2){this.classList.add("rotate"),value=this.getAttribute("value");document.getElementById(value);count<20&&(returnedCard.length<2&&(imageSrc=place[value-1],imageSrc>6&&(imageSrc-=6),this.innerHTML=`<img src="medias/image${imageSrc}.jpg">`,returnedCard.push(imageSrc),placeCard.push(value)),checkCards())}}function checkCards(){if(2===returnedCard.length)if(count++,divCount.innerHTML=`${count}`,returnedCard[0]!=returnedCard[1])setTimeout(backCard,1e3),returnedCard.splice(0,2);else{for(let e of caseNumber)e.getAttribute("value")!=placeCard[0]&&e.getAttribute("value")!=placeCard[1]||e.classList.add("flipped");returnedCard.splice(0,2),placeCard.splice(0,2),click=0}}function backCard(){for(let e of caseNumber)e.getAttribute("value")!=placeCard[0]&&e.getAttribute("value")!=placeCard[1]||(e.classList.remove("rotate"),e.innerHTML='<img src="medias/image0.png">',e.classList.add("unrotate"));placeCard.splice(0,2),click=0}mix(),initialize(),play(),document.addEventListener("keydown",(e=>{"Space"==e.code&&initialize()}));